(()=>{let e;document.querySelector(".preview");const t=document.querySelector(".input_video"),n=document.querySelector("canvas.guides"),i=document.querySelector("#flipper"),o=document.querySelector("iframe#other"),a=document.querySelector("iframe#self"),c=e=>{(e=>{if(!n||!t||!e)return;n.width=t.videoWidth,n.height=t.videoHeight;const i=n.getContext("2d");i.save(),i.clearRect(0,0,n.width,n.height),drawConnectors(i,e,FACEMESH_TESSELATION,{color:"#C0C0C070",lineWidth:1}),e&&478===e.length&&drawLandmarks(i,[e[468],e[473]],{color:"#ffe603",lineWidth:2})})(e.multiFaceLandmarks[0]),s(e.multiFaceLandmarks[0])},s=e=>{if(e){if(console.debug(`Publish animation with totalPoints=${e.length} sample=${JSON.stringify(e[0])}`),o){const{contentWindow:t}=o;t.postMessage({points:e,timestamp:(new Date).getTime()})}if(a){const{contentWindow:t}=a;t.postMessage({points:e,timestamp:(new Date).getTime()})}}};!async function(){console.log("Environment: false"),i.addEventListener("click",(()=>{console.log("clicked!")})),e=new FaceMesh({locateFile:e=>`libs/@mediapipe/face_mesh/${e}`}),e.setOptions({maxNumFaces:1,refineLandmarks:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),e.onResults(c),new Camera(t,{onFrame:async()=>{await e.send({image:t})},width:640,height:480}).start().then((e=>{}))}()})();