/*! For license information please see kalidokit.umd.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).Kalidokit={})}(this,(function(t){"use strict";const e=(t,e,r)=>Math.max(Math.min(t,r),e),r=(t,r,i)=>(e(t,r,i)-r)/(i-r),i={Face:{eye:{l:1,r:1},mouth:{x:0,y:0,shape:{A:0,E:0,I:0,O:0,U:0}},head:{x:0,y:0,z:0,width:.3,height:.6,position:{x:.5,y:.5,z:0}},brow:0,pupil:{x:0,y:0}},Pose:{RightUpperArm:{x:0,y:0,z:-1.25},LeftUpperArm:{x:0,y:0,z:1.25},RightLowerArm:{x:0,y:0,z:0},LeftLowerArm:{x:0,y:0,z:0},LeftUpperLeg:{x:0,y:0,z:0},RightUpperLeg:{x:0,y:0,z:0},RightLowerLeg:{x:0,y:0,z:0},LeftLowerLeg:{x:0,y:0,z:0},LeftHand:{x:0,y:0,z:0},RightHand:{x:0,y:0,z:0},Spine:{x:0,y:0,z:0},Hips:{position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}},RightHand:{RightWrist:{x:-.13,y:-.07,z:-1.04},RightRingProximal:{x:0,y:0,z:-.13},RightRingIntermediate:{x:0,y:0,z:-.4},RightRingDistal:{x:0,y:0,z:-.04},RightIndexProximal:{x:0,y:0,z:-.24},RightIndexIntermediate:{x:0,y:0,z:-.25},RightIndexDistal:{x:0,y:0,z:-.06},RightMiddleProximal:{x:0,y:0,z:-.09},RightMiddleIntermediate:{x:0,y:0,z:-.44},RightMiddleDistal:{x:0,y:0,z:-.06},RightThumbProximal:{x:-.23,y:-.33,z:-.12},RightThumbIntermediate:{x:-.2,y:-.199,z:-.0139},RightThumbDistal:{x:-.2,y:.002,z:.15},RightLittleProximal:{x:0,y:0,z:-.09},RightLittleIntermediate:{x:0,y:0,z:-.225},RightLittleDistal:{x:0,y:0,z:-.1}},LeftHand:{LeftWrist:{x:-.13,y:-.07,z:-1.04},LeftRingProximal:{x:0,y:0,z:.13},LeftRingIntermediate:{x:0,y:0,z:.4},LeftRingDistal:{x:0,y:0,z:.049},LeftIndexProximal:{x:0,y:0,z:.24},LeftIndexIntermediate:{x:0,y:0,z:.25},LeftIndexDistal:{x:0,y:0,z:.06},LeftMiddleProximal:{x:0,y:0,z:.09},LeftMiddleIntermediate:{x:0,y:0,z:.44},LeftMiddleDistal:{x:0,y:0,z:.066},LeftThumbProximal:{x:-.23,y:.33,z:.12},LeftThumbIntermediate:{x:-.2,y:.25,z:.05},LeftThumbDistal:{x:-.2,y:.17,z:-.06},LeftLittleProximal:{x:0,y:0,z:.17},LeftLittleIntermediate:{x:0,y:0,z:.4},LeftLittleDistal:{x:0,y:0,z:.1}}};var n=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",clamp:e,remap:r,RestingDefault:i});const o="Right",a="Left",s=Math.PI,l=2*Math.PI;class y{constructor(t,e,r){var i,n,o,a,s,l;return Array.isArray(t)?(this.x=null!=(i=t[0])?i:0,this.y=null!=(n=t[1])?n:0,void(this.z=null!=(o=t[2])?o:0)):t&&"object"==typeof t?(this.x=null!=(a=t.x)?a:0,this.y=null!=(s=t.y)?s:0,void(this.z=null!=(l=t.z)?l:0)):(this.x=null!=t?t:0,this.y=null!=e?e:0,void(this.z=null!=r?r:0))}negative(){return new y(-this.x,-this.y,-this.z)}add(t){return t instanceof y?new y(this.x+t.x,this.y+t.y,this.z+t.z):new y(this.x+t,this.y+t,this.z+t)}subtract(t){return t instanceof y?new y(this.x-t.x,this.y-t.y,this.z-t.z):new y(this.x-t,this.y-t,this.z-t)}multiply(t){return t instanceof y?new y(this.x*t.x,this.y*t.y,this.z*t.z):new y(this.x*t,this.y*t,this.z*t)}divide(t){return t instanceof y?new y(this.x/t.x,this.y/t.y,this.z/t.z):new y(this.x/t,this.y/t,this.z/t)}equals(t){return this.x==t.x&&this.y==t.y&&this.z==t.z}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}cross(t){return new y(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}length(){return Math.sqrt(this.dot(this))}distance(t,e=3){return Math.sqrt(2===e?Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2):Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2)+Math.pow(this.z-t.z,2))}lerp(t,e){return t.subtract(this).multiply(e).add(this)}unit(){return this.divide(this.length())}min(){return Math.min(Math.min(this.x,this.y),this.z)}max(){return Math.max(Math.max(this.x,this.y),this.z)}toSphericalCoords(t={x:"x",y:"y",z:"z"}){return{theta:Math.atan2(this[t.y],this[t.x]),phi:Math.acos(this[t.z]/this.length())}}angleTo(t){return Math.acos(this.dot(t)/(this.length()*t.length()))}toArray(t){return[this.x,this.y,this.z].slice(0,t||3)}clone(){return new y(this.x,this.y,this.z)}init(t,e,r){return this.x=t,this.y=e,this.z=r,this}static negative(t,e=new y){return e.x=-t.x,e.y=-t.y,e.z=-t.z,e}static add(t,e,r=new y){return e instanceof y?(r.x=t.x+e.x,r.y=t.y+e.y,r.z=t.z+e.z):(r.x=t.x+e,r.y=t.y+e,r.z=t.z+e),r}static subtract(t,e,r=new y){return e instanceof y?(r.x=t.x-e.x,r.y=t.y-e.y,r.z=t.z-e.z):(r.x=t.x-e,r.y=t.y-e,r.z=t.z-e),r}static multiply(t,e,r=new y){return e instanceof y?(r.x=t.x*e.x,r.y=t.y*e.y,r.z=t.z*e.z):(r.x=t.x*e,r.y=t.y*e,r.z=t.z*e),r}static divide(t,e,r=new y){return e instanceof y?(r.x=t.x/e.x,r.y=t.y/e.y,r.z=t.z/e.z):(r.x=t.x/e,r.y=t.y/e,r.z=t.z/e),r}static cross(t,e,r=new y){return r.x=t.y*e.z-t.z*e.y,r.y=t.z*e.x-t.x*e.z,r.z=t.x*e.y-t.y*e.x,r}static unit(t,e){const r=t.length();return e.x=t.x/r,e.y=t.y/r,e.z=t.z/r,e}static fromAngles(t,e){return new y(Math.cos(t)*Math.cos(e),Math.sin(e),Math.sin(t)*Math.cos(e))}static randomDirection(){return y.fromAngles(Math.random()*l,Math.asin(2*Math.random()-1))}static min(t,e){return new y(Math.min(t.x,e.x),Math.min(t.y,e.y),Math.min(t.z,e.z))}static max(t,e){return new y(Math.max(t.x,e.x),Math.max(t.y,e.y),Math.max(t.z,e.z))}static lerp(t,e,r){return e instanceof y?e.subtract(t).multiply(r).add(t):(e-t)*r+t}static fromArray(t){return Array.isArray(t)?new y(t[0],t[1],t[2]):new y(t.x,t.y,t.z)}static angleBetween(t,e){return t.angleTo(e)}static distance(t,e,r){return Math.sqrt(2===r?Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2):Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)+Math.pow(t.z-e.z,2))}static toDegrees(t){return t*(180/s)}static normalizeAngle(t){let e=t%l;return e=e>s?e-l:e<-s?l+e:e,e/s}static normalizeRadians(t){return t>=s/2&&(t-=l),t<=-s/2&&(t=s-(t+=l)),t/s}static find2DAngle(t,e,r,i){const n=i-e,o=r-t;return Math.atan2(n,o)}static findRotation(t,e,r=!0){return r?new y(y.normalizeRadians(y.find2DAngle(t.z,t.x,e.z,e.x)),y.normalizeRadians(y.find2DAngle(t.z,t.y,e.z,e.y)),y.normalizeRadians(y.find2DAngle(t.x,t.y,e.x,e.y))):new y(y.find2DAngle(t.z,t.x,e.z,e.x),y.find2DAngle(t.z,t.y,e.z,e.y),y.find2DAngle(t.x,t.y,e.x,e.y))}static rollPitchYaw(t,e,r){if(!r)return new y(y.normalizeAngle(y.find2DAngle(t.z,t.y,e.z,e.y)),y.normalizeAngle(y.find2DAngle(t.z,t.x,e.z,e.x)),y.normalizeAngle(y.find2DAngle(t.x,t.y,e.x,e.y)));const i=e.subtract(t),n=r.subtract(t),o=i.cross(n).unit(),a=i.unit(),s=o.cross(a),l=Math.asin(o.x)||0,h=Math.atan2(-o.y,o.z)||0,x=Math.atan2(-s.x,a.x)||0;return new y(y.normalizeAngle(h),y.normalizeAngle(l),y.normalizeAngle(x))}static angleBetween3DCoords(t,e,r){t instanceof y||(t=new y(t),e=new y(e),r=new y(r));const i=t.subtract(e),n=r.subtract(e),o=i.unit(),a=n.unit(),s=o.dot(a),l=Math.acos(s);return y.normalizeRadians(l)}static getRelativeSphericalCoords(t,e,r,i){t instanceof y||(t=new y(t),e=new y(e),r=new y(r));const n=e.subtract(t),o=r.subtract(e),a=n.unit(),s=o.unit(),{theta:l,phi:h}=a.toSphericalCoords(i),{theta:x,phi:z}=s.toSphericalCoords(i),d=l-x,p=h-z;return{theta:y.normalizeAngle(d),phi:y.normalizeAngle(p)}}static getSphericalCoords(t,e,r={x:"x",y:"y",z:"z"}){t instanceof y||(t=new y(t),e=new y(e));const i=e.subtract(t).unit(),{theta:n,phi:o}=i.toSphericalCoords(r);return{theta:y.normalizeAngle(-n),phi:y.normalizeAngle(s/2-o)}}}const h=t=>{const r={r:y.findRotation(t[11],t[13]),l:y.findRotation(t[12],t[14])};r.r.y=y.angleBetween3DCoords(t[12],t[11],t[13]),r.l.y=y.angleBetween3DCoords(t[11],t[12],t[14]);const i={r:y.findRotation(t[13],t[15]),l:y.findRotation(t[14],t[16])};i.r.y=y.angleBetween3DCoords(t[11],t[13],t[15]),i.l.y=y.angleBetween3DCoords(t[12],t[14],t[16]),i.r.z=e(i.r.z,-2.14,0),i.l.z=e(i.l.z,-2.14,0);const n={r:y.findRotation(y.fromArray(t[15]),y.lerp(y.fromArray(t[17]),y.fromArray(t[19]),.5)),l:y.findRotation(y.fromArray(t[16]),y.lerp(y.fromArray(t[18]),y.fromArray(t[20]),.5))},s=x(r.r,i.r,n.r,o),l=x(r.l,i.l,n.l,a);return{UpperArm:{r:s.UpperArm,l:l.UpperArm},LowerArm:{r:s.LowerArm,l:l.LowerArm},Hand:{r:s.Hand,l:l.Hand},Unscaled:{UpperArm:r,LowerArm:i,Hand:n}}},x=(t,r,i,n=o)=>{const a=n===o?1:-1;return t.z*=-2.3*a,t.y*=s*a,t.y-=Math.max(r.x),t.y-=-a*Math.max(r.z,0),t.x-=.3*a,r.z*=-2.14*a,r.y*=2.14*a,r.x*=2.14*a,t.x=e(t.x,-.5,s),r.x=e(r.x,-.3,.3),i.y=e(2*i.z,-.6,.6),i.z=-2.3*i.z*a,{UpperArm:t,LowerArm:r,Hand:i}},z=(t,i)=>{const n=y.fromArray(i[23]),o=y.fromArray(i[24]),a=y.fromArray(i[11]),s=y.fromArray(i[12]),l=n.lerp(o,1),h=a.lerp(s,1),x=l.distance(h),z={position:{x:e(l.x-.4,-1,1),y:0,z:e(x-1,-2,0)}};z.worldPosition={x:z.position.x,y:0,z:z.position.z*Math.pow(-2*z.position.z,2)},z.worldPosition.x*=z.worldPosition.z,z.rotation=y.rollPitchYaw(t[23],t[24]),z.rotation.y>.5&&(z.rotation.y-=2),z.rotation.y+=.5,z.rotation.z>0&&(z.rotation.z=1-z.rotation.z),z.rotation.z<0&&(z.rotation.z=-1-z.rotation.z);const p=r(Math.abs(z.rotation.y),.2,.4);z.rotation.z*=1-p,z.rotation.x=0;const c=y.rollPitchYaw(t[11],t[12]);c.y>.5&&(c.y-=2),c.y+=.5,c.z>0&&(c.z=1-c.z),c.z<0&&(c.z=-1-c.z);const m=r(Math.abs(c.y),.2,.4);return c.z*=1-m,c.x=0,d(z,c)},d=(t,e)=>(t.rotation&&(t.rotation.x*=Math.PI,t.rotation.y*=Math.PI,t.rotation.z*=Math.PI),e.x*=s,e.y*=s,e.z*=s,{Hips:t,Spine:e});class p{constructor(t,e,r,i){var n,o,a,s;if(t&&"object"==typeof t)return this.x=null!=(n=t.x)?n:0,this.y=null!=(o=t.y)?o:0,this.z=null!=(a=t.z)?a:0,void(this.rotationOrder=null!=(s=t.rotationOrder)?s:"XYZ");this.x=null!=t?t:0,this.y=null!=e?e:0,this.z=null!=r?r:0,this.rotationOrder=null!=i?i:"XYZ"}multiply(t){return new p(this.x*t,this.y*t,this.z*t,this.rotationOrder)}}const c=.1,m=t=>{const e=y.getSphericalCoords(t[23],t[25],{x:"y",y:"z",z:"x"}),r=y.getSphericalCoords(t[24],t[26],{x:"y",y:"z",z:"x"}),i=y.getRelativeSphericalCoords(t[23],t[25],t[27],{x:"y",y:"z",z:"x"}),n=y.getRelativeSphericalCoords(t[24],t[26],t[28],{x:"y",y:"z",z:"x"}),s=y.findRotation(t[23],t[24]),l={r:new y({x:e.theta,y:i.phi,z:e.phi-s.z}),l:new y({x:r.theta,y:n.phi,z:r.phi-s.z})},h={r:new y({x:-Math.abs(i.theta),y:0,z:0}),l:new y({x:-Math.abs(n.theta),y:0,z:0})},x=u(l.r,h.r,o),z=u(l.l,h.l,a);return{UpperLeg:{r:x.UpperLeg,l:z.UpperLeg},LowerLeg:{r:x.LowerLeg,l:z.LowerLeg},Unscaled:{UpperLeg:l,LowerLeg:h}}},u=(t,r,i=o)=>{const n=i===o?1:-1;return{UpperLeg:new p({x:e(t.x,0,.5)*s,y:e(t.y,-.25,.25)*s,z:e(t.z,-.5,.5)*s+n*c,rotationOrder:"XYZ"}),LowerLeg:new p({x:r.x*s,y:r.y*s,z:r.z*s})}};class g{static solve(t,e,{runtime:r="mediapipe",video:n=null,imageSize:o=null,enableLegs:a=!0}={}){var s,l,y,x;if(!t&&!e)return void console.error("Need both World Pose and Pose Landmarks");if(n){const t="string"==typeof n?document.querySelector(n):n;o={width:t.videoWidth,height:t.videoHeight}}if("tfjs"===r&&o){for(const e of t)e.visibility=e.score;for(const t of e)t.x/=o.width,t.y/=o.height,t.z=0,t.visibility=t.score}const d=h(t),p=z(t,e),c=a?m(t):null,u=t[15].y>.1||(null!=(s=t[15].visibility)?s:0)<.23||.995<e[15].y,g=t[16].y>.1||(null!=(l=t[16].visibility)?l:0)<.23||.995<e[16].y,w=t[23].y>.1||(null!=(y=t[23].visibility)?y:0)<.63||p.Hips.position.z>-.4,f=t[24].y>.1||(null!=(x=t[24].visibility)?x:0)<.63||p.Hips.position.z>-.4;return d.UpperArm.l=d.UpperArm.l.multiply(g?0:1),d.UpperArm.l.z=g?i.Pose.LeftUpperArm.z:d.UpperArm.l.z,d.UpperArm.r=d.UpperArm.r.multiply(u?0:1),d.UpperArm.r.z=u?i.Pose.RightUpperArm.z:d.UpperArm.r.z,d.LowerArm.l=d.LowerArm.l.multiply(g?0:1),d.LowerArm.r=d.LowerArm.r.multiply(u?0:1),d.Hand.l=d.Hand.l.multiply(g?0:1),d.Hand.r=d.Hand.r.multiply(u?0:1),c&&(c.UpperLeg.l=c.UpperLeg.l.multiply(f?0:1),c.UpperLeg.r=c.UpperLeg.r.multiply(w?0:1),c.LowerLeg.l=c.LowerLeg.l.multiply(f?0:1),c.LowerLeg.r=c.LowerLeg.r.multiply(w?0:1)),{RightUpperArm:d.UpperArm.r,RightLowerArm:d.LowerArm.r,LeftUpperArm:d.UpperArm.l,LeftLowerArm:d.LowerArm.l,RightHand:d.Hand.r,LeftHand:d.Hand.l,RightUpperLeg:c?c.UpperLeg.r:i.Pose.RightUpperLeg,RightLowerLeg:c?c.LowerLeg.r:i.Pose.RightLowerLeg,LeftUpperLeg:c?c.UpperLeg.l:i.Pose.LeftUpperLeg,LeftLowerLeg:c?c.LowerLeg.l:i.Pose.LeftLowerLeg,Hips:p.Hips,Spine:p.Spine}}}g.calcArms=h,g.calcHips=z,g.calcLegs=m;const w={eye:{[a]:[130,133,160,159,158,144,145,153],[o]:[263,362,387,386,385,373,374,380]},brow:{[a]:[35,244,63,105,66,229,230,231],[o]:[265,464,293,334,296,449,450,451]},pupil:{[a]:[468,469,470,471,472],[o]:[473,474,475,476,477]}},f=(t,i=a,{high:n=.85,low:o=.55}={})=>{const s=w.eye[i],l=L(t[s[0]],t[s[1]],t[s[2]],t[s[3]],t[s[4]],t[s[5]],t[s[6]],t[s[7]]),y=e(l/.285,0,2);return{norm:r(y,o,n),raw:y}},L=(t,e,r,i,n,o,a,s)=>{t=new y(t),e=new y(e),r=new y(r),i=new y(i),n=new y(n),o=new y(o),a=new y(a),s=new y(s);const l=t.distance(e,2);return(r.distance(o,2)+i.distance(a,2)+n.distance(s,2))/3/l},A=(t,e=a)=>{const r=new y(t[w.eye[e][0]]),i=new y(t[w.eye[e][1]]),n=r.distance(i,2),o=r.lerp(i,.5),s=new y(t[w.pupil[e][0]]);let l=(o.x-s.x)/(n/2),h=(o.y-.075*n-s.y)/(n/4);return l*=4,h*=4,{x:l,y:h}},M=(t,r,{enableWink:i=!0,maxRot:n=.5}={})=>{t.r=e(t.r,0,1),t.l=e(t.l,0,1);const o=Math.abs(t.l-t.r),a=i?.8:1.2,s=t.l<.3&&t.r<.3,l=t.l>.6&&t.r>.6;return r>n?{l:t.r,r:t.r}:r<-n?{l:t.l,r:t.l}:{l:o>=a&&!s&&!l?t.l:t.r>t.l?y.lerp(t.r,t.l,.95):y.lerp(t.r,t.l,.05),r:o>=a&&!s&&!l?t.r:t.r>t.l?y.lerp(t.r,t.l,.95):y.lerp(t.r,t.l,.05)}},R=(t,r=a)=>{const i=w.brow[r],n=L(t[i[0]],t[i[1]],t[i[2]],t[i[3]],t[i[4]],t[i[5]],t[i[6]],t[i[7]]),o=.07;return(e(n/1.15-1,o,.125)-o)/(.125-o)};class b{static solve(t,{runtime:i="tfjs",video:n=null,imageSize:l=null,smoothBlink:h=!1,blinkSettings:x=[]}={}){if(!t)return void console.error("Need Face Landmarks");if(n){const t="string"==typeof n?document.querySelector(n):n;l={width:t.videoWidth,height:t.videoHeight}}if("mediapipe"===i&&l)for(const e of t)e.x*=l.width,e.y*=l.height,e.z*=l.width;const z=(t=>{const e=(t=>{const e=new y(t[21]),r=new y(t[251]),i=new y(t[397]),n=new y(t[172]);return{vector:[e,r,i.lerp(n,.5)],points:[e,r,i,n]}})(t).vector,r=y.rollPitchYaw(e[0],e[1],e[2]),i=e[0].lerp(e[1],.5),n=e[0].distance(e[1]),o=i.distance(e[2]);return r.x*=-1,r.z*=-1,{y:r.y*s,x:r.x*s,z:r.z*s,width:n,height:o,position:i.lerp(e[2],.5),normalized:{y:r.y,x:r.x,z:r.z},degrees:{y:180*r.y,x:180*r.x,z:180*r.z}}})(t),d=(t=>{const i=new y(t[133]),n=new y(t[362]),o=new y(t[130]),a=new y(t[263]),s=i.distance(n),l=o.distance(a),h=new y(t[13]),x=new y(t[14]),z=new y(t[61]),d=new y(t[291]),p=h.distance(x);let c=p/s,m=z.distance(d)/l;c=r(c,.15,.7),m=r(m,.45,.9),m=2*(m-.3);const u=m,g=r(p/s,.17,.5),w=e(2*r(u,0,1)*r(g,.2,.7),0,1),f=.4*g+g*(1-w)*.6,L=g*r(1-w,0,.3)*.1;return{x:m||0,y:c||0,shape:{A:f||0,E:r(L,.2,1)*(1-w)*.3||0,I:w||0,O:(1-w)*r(g,.3,1)*.4||0,U:L||0}}})(t);let p=((t,{high:e=.85,low:r=.55}={})=>{if(478!==t.length)return{l:1,r:1};const i=f(t,a,{high:e,low:r}),n=f(t,o,{high:e,low:r});return{l:i.norm||0,r:n.norm||0}})(t,{high:(x=x.length>0?x:"tfjs"===i?[.55,.85]:[.35,.5])[1],low:x[0]});h&&(p=M(p,z.y));const c=(t=>{if(478!==t.length)return{x:0,y:0};{const e=A(t,a),r=A(t,o);return{x:.5*(e.x+r.x)||0,y:.5*(e.y+r.y)||0}}})(t);var m;return{head:z,eye:p,brow:478!==(m=t).length?0:(R(m,a)+R(m,o))/2||0,pupil:c,mouth:d}}}b.stabilizeBlink=M;const D=null;t.AxisMap=D,t.EulerRotation=D,t.Face=b,t.Hand=class{static solve(t,r=o){if(!t)return void console.error("Need Hand Landmarks");const i=[new y(t[0]),new y(t[r===o?17:5]),new y(t[r===o?5:17])],n=y.rollPitchYaw(i[0],i[1],i[2]);n.y=n.z,n.y-=.4;let a={};return a[r+"Wrist"]={x:n.x,y:n.y,z:n.z},a[r+"RingProximal"]={x:0,y:0,z:y.angleBetween3DCoords(t[0],t[13],t[14])},a[r+"RingIntermediate"]={x:0,y:0,z:y.angleBetween3DCoords(t[13],t[14],t[15])},a[r+"RingDistal"]={x:0,y:0,z:y.angleBetween3DCoords(t[14],t[15],t[16])},a[r+"IndexProximal"]={x:0,y:0,z:y.angleBetween3DCoords(t[0],t[5],t[6])},a[r+"IndexIntermediate"]={x:0,y:0,z:y.angleBetween3DCoords(t[5],t[6],t[7])},a[r+"IndexDistal"]={x:0,y:0,z:y.angleBetween3DCoords(t[6],t[7],t[8])},a[r+"MiddleProximal"]={x:0,y:0,z:y.angleBetween3DCoords(t[0],t[9],t[10])},a[r+"MiddleIntermediate"]={x:0,y:0,z:y.angleBetween3DCoords(t[9],t[10],t[11])},a[r+"MiddleDistal"]={x:0,y:0,z:y.angleBetween3DCoords(t[10],t[11],t[12])},a[r+"ThumbProximal"]={x:0,y:0,z:y.angleBetween3DCoords(t[0],t[1],t[2])},a[r+"ThumbIntermediate"]={x:0,y:0,z:y.angleBetween3DCoords(t[1],t[2],t[3])},a[r+"ThumbDistal"]={x:0,y:0,z:y.angleBetween3DCoords(t[2],t[3],t[4])},a[r+"LittleProximal"]={x:0,y:0,z:y.angleBetween3DCoords(t[0],t[17],t[18])},a[r+"LittleIntermediate"]={x:0,y:0,z:y.angleBetween3DCoords(t[17],t[18],t[19])},a[r+"LittleDistal"]={x:0,y:0,z:y.angleBetween3DCoords(t[18],t[19],t[20])},a=((t,r=o)=>{const i=r===o?1:-1,n=["Proximal","Intermediate","Distal"];return t[r+"Wrist"].x=e(2*t[r+"Wrist"].x*i,-.3,.3),t[r+"Wrist"].y=e(2.3*t[r+"Wrist"].y,r===o?-1.2:-.6,r===o?.6:1.6),t[r+"Wrist"].z=-2.3*t[r+"Wrist"].z*i,["Ring","Index","Little","Thumb","Middle"].forEach((a=>{n.forEach((n=>{const l=t[r+a+n];if("Thumb"===a){const t={x:"Proximal"===n?2.2:0,y:"Proximal"===n?2.2:"Intermediate"===n?.7:1,z:.5},a={x:"Proximal"===n?1.2:-.2,y:"Proximal"===n?1.1*i:.1*i,z:.2*i},y={x:0,y:0,z:0};"Proximal"===n?(y.z=e(a.z+l.z*-s*t.z*i,r===o?-.6:-.3,r===o?.3:.6),y.x=e(a.x+l.z*-s*t.x,-.6,.3),y.y=e(a.y+l.z*-s*t.y*i,r===o?-1:-.3,r===o?.3:1)):(y.z=e(a.z+l.z*-s*t.z*i,-2,2),y.x=e(a.x+l.z*-s*t.x,-2,2),y.y=e(a.y+l.z*-s*t.y*i,-2,2)),l.x=y.x,l.y=y.y,l.z=y.z}else l.z=e(l.z*-s*i,r===o?-s:0,r===o?0:s)}))})),t})(a,r),a}},t.HandKeys=D,t.IFaceSolveOptions=D,t.IHips=D,t.IPoseSolveOptions=D,t.ISolveOptions=D,t.LR=D,t.Pose=g,t.Results=D,t.RotationOrder=D,t.Side=D,t.TFVectorPose=D,t.TFace=D,t.THand=D,t.THandUnsafe=D,t.TPose=D,t.Utils=n,t.Vector=y,t.XYZ=D,Object.defineProperty(t,"__esModule",{value:!0}),t[Symbol.toStringTag]="Module"}));